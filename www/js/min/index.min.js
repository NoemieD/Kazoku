var nbImage=1,app={initialize:function(){this.bindEvents()},onSuccess:function(e){var t=e,i=document.getElementsByTagName("main")[0],n=document.getElementById("picture-preview"),a=document.getElementById("picture-end-preview");i.style.backgroundImage='url("'+t+'")',n.style.backgroundImage='url("'+t+'")',a.src=t;var d=document.getElementById("hide-for-picture");d.style.display="none";var o=document.getElementById("edit");o.style.display="block";var c=document.getElementById("add-picture");c.style.display="block";var e=e;this.uploadPhoto(e)},onSuccessAddPicture:function(e){var t=e,i=document.getElementById("picture-preview-snd"),n=document.getElementById("picture-end-preview-snd"),a=document.getElementsByClassName("picture-preview")[0];n.src=t,i.style.backgroundImage='url("'+t+'")',a.style.width="50%",a.style.float="left";var e=e;this.uploadPhoto(e)},onFail:function(e){alert("Failed because: "+e)},onTakePhoto:function(){navigator.camera.getPicture(this.onSuccess.bind(this),this.onFail,{quality:50,destinationType:Camera.DestinationType.FILE_URI})},onTakeAddPicture:function(){navigator.camera.getPicture(this.onSuccessAddPicture.bind(this),this.onFail,{quality:50,destinationType:Camera.DestinationType.FILE_URI})},uploadPhoto:function(e){var t=new FileUploadOptions;t.fileKey="file",t.fileName="img"+nbImage+".jpg",nbImage+=1;var i=new FileTransfer;i.upload(e,"http://noemiediaz.fr/kazoku/upload.php",function(){alert("win")},function(){alert("fail")},t)},fail:function(){alert("fail")},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1);var e=document.getElementById("illustration"),t=document.getElementById("edit"),i=document.getElementById("add-picture");e&&e.addEventListener("click",this.onTakePhoto.bind(this),!1),t&&t.addEventListener("click",this.onTakePhoto.bind(this),!1),i&&i.addEventListener("click",this.onTakeAddPicture.bind(this),!1)},onDeviceReady:function(){},receivedEvent:function(){var e=document.getElementById(id),t=e.querySelector(".listening"),i=e.querySelector(".received");t.setAttribute("style","display:none;"),i.setAttribute("style","display:block;"),console.log("Received Event: "+id)}};app.initialize();