var app={initialize:function(){this.bindEvents()},onSuccess:function(e){var t=e,n=document.getElementsByTagName("main")[0],i=document.getElementById("picture-preview"),o=document.getElementById("picture-end-preview");n.style.backgroundImage='url("'+t+'")',i.style.backgroundImage='url("'+t+'")',o.src=t;var a=document.getElementById("hide-for-picture");a.style.display="none";var l=document.getElementById("edit");l.style.display="block";var e=e;this.uploadPhoto(e)},onFail:function(e){alert("Failed because: "+e)},onSuccessMusic:function(){alert("sucess")},onTakePhoto:function(){navigator.camera.getPicture(this.onSuccess.bind(this),this.onFail,{quality:50,destinationType:Camera.DestinationType.FILE_URI})},onTakeMusic:function(){console.log("onTakeMusic"),window.requestFileSystem(LocalFileSystem.PERSISTENT,0,this.gotFS.bind(this),this.fail)},gotFS:function(e){console.log("gotFS"),e.root.getFile("",null,this.gotFileEntry,this.fail)},gotFileEntry:function(e){console.log("fileEntry"),e.file(this.gotFile.bind(this),this.fail.bind(this))},gotFile:function(e){console.log("gotFile"),readDataUrl(e),readAsText(e)},readDataUrl:function(e){console.log("readAsDataURL");var t=new FileReader;t.onloadend=function(e){console.log("Read as data URL"),console.log(e.target.result)},t.readAsDataURL(e)},readAsText:function(e){console.log("readAsText");var t=new FileReader;t.onloadend=function(e){console.log("Read as text"),console.log(e.target.result)},t.readAsText(e)},uploadPhoto:function(e){var t=1,n=new FileUploadOptions;n.fileKey="file",n.fileName="img1.jpg",t+=1;var i=new FileTransfer;i.upload(e,"http://noemiediaz.fr/kazoku/upload.php",function(){alert("win")},function(){alert("fail")},n)},fail:function(){alert("fail")},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1);var e=document.getElementById("illustration"),t=document.getElementById("edit"),n=document.getElementById("musique");e&&e.addEventListener("click",this.onTakePhoto.bind(this),!1),t&&t.addEventListener("click",this.onTakePhoto.bind(this),!1),n&&n.addEventListener("click",this.onTakeMusic.bind(this),!1)},onDeviceReady:function(){},receivedEvent:function(){var e=document.getElementById(id),t=e.querySelector(".listening"),n=e.querySelector(".received");t.setAttribute("style","display:none;"),n.setAttribute("style","display:block;"),console.log("Received Event: "+id)}};app.initialize();